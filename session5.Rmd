---
title: "Work with Data: Derive Information with dplyr"
description: |
  **Session 5**: Derive Information with dplyr
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

## 5.1 Derive Information with dplyr

In this session, you will continue learning data manipulation with `dplyr`.

**Go through the RStudio Primer 2.3 on [Derive Information with dplyr](https://rstudio.cloud/learn/primers/2.3),** and **complete the assignments below.**

### Assignment
 
Using the **taxation** dataset, complete the following tasks:

  1. Create a new column called `income_labels` from `income_mean`, where you have 4 new income categories **below 50000, 5000-79999, 8000-109999, and above 110000.** You can code the categories as numbers from 1 to 4. 
  2. How many quarters are there for each of the four categories by year? Use `group_by()` and `summarize()` to answer. You can make a table like this:
```{r include=FALSE, echo=FALSE}
library(tidyverse)
taxation <- read_csv("data/taxation.csv")
taxation = mutate(taxation, income_labels = case_when(income_mean < 50000 ~ "1",
                                              income_mean >= 50000 & income_mean < 80000 ~ "2",
                                              income_mean >= 80000 & income_mean < 110000 ~ "3",
                                              income_mean >= 110000  ~ "4"))
```
``` {r include = T}
new_taxation = taxation %>% 
  group_by(year, income_labels) %>%
  summarise(number_quarters = n()) %>%
  print()
```